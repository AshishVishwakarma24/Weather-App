<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Weather App</title>
  <!-- bootstrap + weather icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/weather-icons/2.0.10/css/weather-icons.min.css" rel="stylesheet">

  <style>
    body {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: 'Segoe UI', sans-serif;
      transition: background 0.6s ease-in-out; /* smooth background change */
      animation: bgMove 20s infinite alternate; /* slow gradient animation */
    }

    .card {
      border-radius: 1rem;
      backdrop-filter: blur(6px); /* glass effect */
      animation: fadeIn 0.8s ease-in; /* fade cards */
    }

    img {
      animation: popIn 1s ease; /* smooth icon pop */
    }

    /* animated background shift */
    @keyframes bgMove {
      from { background-position: left; }
      to { background-position: right; }
    }

    /* fade in for cards */
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* pop-in for weather icons */
    @keyframes popIn {
      from { opacity: 0; transform: scale(0.9); }
      to { opacity: 1; transform: scale(1); }
    }

    /* background themes */
    .clear { background: linear-gradient(to bottom, #fceabb, #f8b500); }
    .clouds { background: linear-gradient(to bottom, #d7d2cc, #304352); }
    .rain { background: linear-gradient(to bottom, #373b44, #4286f4); }
    .snow { background: linear-gradient(to bottom, #e6dada, #274046); }
    .default { background: linear-gradient(to bottom, #74ebd5, #ACB6E5); }
  </style>
</head>

<!-- body background changes with weather (fallback = default) -->
<body class="{% if data %}{{ data.main | lower }}{% else %}default{% endif %}">

  <div class="container py-4">
    <div class="row justify-content-center">
      <div class="col-md-6">

        <!-- search form -->
        <div class="card shadow p-4 mb-4">
          <h3 class="text-center mb-3">ðŸŒ¤ Weather App</h3>
          <form method="POST">
            <div class="input-group mb-2">
              <input type="text" class="form-control" name="cityName" placeholder="City" required>
              <input type="text" class="form-control" name="stateName" placeholder="State">
              <input type="text" class="form-control" name="countryName" placeholder="Country" value="India">
            </div>
            <!-- unit toggle -->
            <div class="d-flex justify-content-between mb-2">
              <label><input type="radio" name="units" value="metric" checked> Â°C</label>
              <label><input type="radio" name="units" value="imperial"> Â°F</label>
            </div>
            <button type="submit" class="btn btn-primary w-100">Find Weather</button>
          </form>

          <!-- error alert -->
          {% if error %}
            <div class="alert alert-danger text-center mt-3">{{ error }}</div>
          {% endif %}
        </div>

        <!-- current weather card -->
        {% if data %}
        <div class="card shadow p-4 mb-4 text-center">
          <h4>{{ data.main }}</h4>
          <p class="text-muted">{{ data.description }}</p>
          <!-- big weather icon -->
          <img src="https://openweathermap.org/img/wn/{{ data.icon }}@4x.png" alt="icon">
          <h2 class="mb-0">{{ data.temperature }}Â°</h2>
          <small>Feels like {{ data.feels_like }}Â°</small>

          <!-- extra details row -->
          <div class="mt-3 row">
            <div class="col"><i class="wi wi-humidity"></i> {{ data.humidity }}%</div>
            <div class="col"><i class="wi wi-strong-wind"></i> {{ data.wind_speed }} m/s</div>
          </div>
          <div class="mt-2 row">
            <div class="col"><i class="wi wi-sunrise"></i> {{ data.sunrise }}</div>
            <div class="col"><i class="wi wi-sunset"></i> {{ data.sunset }}</div>
          </div>
        </div>
        {% endif %}

        <!-- forecast cards -->
        {% if forecast %}
        <div class="card shadow p-4">
          <h5 class="text-center mb-3">5-Day Forecast</h5>
          <div class="row text-center">
            {% for f in forecast %}
            <div class="col-6 col-md-4 mb-3">
              <div class="border rounded p-2 h-100" style="animation: fadeIn 1s ease;">
                <small>{{ f.date }}</small>
                <img src="https://openweathermap.org/img/wn/{{ f.icon }}@2x.png" alt="icon">
                <div><strong>{{ f.temperature }}Â°</strong></div>
                <small class="text-muted">{{ f.description }}</small>
              </div>
            </div>
            {% endfor %}
          </div>
        </div>
        {% endif %}

      </div>
    </div>
  </div>

</body>
</html>
